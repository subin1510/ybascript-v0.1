-- Wait until "LoadingScreen1" becomes nil
while game.Players.LocalPlayer.PlayerGui:FindFirstChild("LoadingScreen1") ~= nil do
    wait(0.1)  -- Wait for a small amount of time (0.1 seconds) before checking again
end

wait(25)  
local player = game.Players.LocalPlayer  -- ho·∫∑c c√°ch kh√°c ƒë·ªÉ x√°c ƒë·ªãnh player
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local playerStats = LocalPlayer:FindFirstChild("PlayerStats")
local money = playerStats and playerStats:FindFirstChild("Money")
local luckyArrowCount = 0  -- ƒê·∫øm s·ªë Lucky Arrow
local initialMoney = money and money.Value or 0  -- L∆∞u s·ªë ti·ªÅn ban ƒë·∫ßu khi b·∫Øt ƒë·∫ßu
local moneyEarned = money and money.Value - initialMoney or 0  -- Tr√°nh tr∆∞·ªùng h·ª£p bi·∫øn 'money' l√† nil

local imageUrls = {
    "https://cdn.discordapp.com/attachments/1303015333346676857/1313575764280741918/image.png?ex=6750a243&is=674f50c3&hm=3ab8c1ba26cff9c96ec3b29b19659542f317803df53576b2f17afc0ec2085f18&", -- V√≠ d·ª• h√¨nh ·∫£nh 1
    "https://cdn.discordapp.com/attachments/1304774101772140545/1313546068302233620/image.png?ex=6750869b&is=674f351b&hm=e88a07acd2c5c3920cdafc0fa9eaf7cf9bdf2824445a9f6abd37efbbea93ae70&", -- V√≠ d·ª• h√¨nh ·∫£nh 2
    "https://cdn.discordapp.com/attachments/1303015333346676857/1313576552335802388/image.png?ex=6750a2ff&is=674f517f&hm=f002ab3b19eaf522c11d09352f280e5ad14790fe689af58f65c58f9cc9307d99&",
    "https://cdn.discordapp.com/attachments/1303015333346676857/1313576826970439741/image.png?ex=6750a340&is=674f51c0&hm=bef744745ecf1087e58ad0948aeff3713d561de65827b1034603270c8465b7c1&",
    "https://cdn.discordapp.com/attachments/1303015333346676857/1313576938677211238/image.png?ex=6750a35b&is=674f51db&hm=5d097734ae2549400a95f2a99a601b64c74631c2439a7d08ddafc98b9bdbfd01&",
    "https://cdn.discordapp.com/attachments/1303015333346676857/1313577167203995739/image.png?ex=6750a391&is=674f5211&hm=a9f7cd0fa9fdc8a6a35e30b19495d4a58cf21df7553af2cd15ed2214b8d0a633&",
    "https://cdn.discordapp.com/attachments/1303015333346676857/1313577759808684133/image.png?ex=6750a41f&is=674f529f&hm=07d81e88b257888e84031045deb8c8b28e2e601421d039c2de900e77aa37accd&"  -- V√≠ d·ª• h√¨nh ·∫£nh 3
}

local OSTime = os.time()

local url = "https://discord.com/api/webhooks/1313575227715883169/_lhoJW-xTZCUB2vncBE95SyJMyhFHR508kbdTxqrFIQQUHjqS6oXzyx2x7tdAml_R0v4"
local userId = "<@1201114732455788574>"

-- H√†m g·ª≠i tin nh·∫Øn (message) qua webhook
function SendMessage(url, message)
    local http = game:GetService("HttpService")
    local headers = {
        ["Content-Type"] = "application/json"
    }
    local data = {
        ["content"] = message
    }
    local body = http:JSONEncode(data)
    local response = request({
        Url = url,
        Method = "POST",
        Headers = headers,
        Body = body
    })
    print("Sent")
end

-- H√†m g·ª≠i tin nh·∫Øn c√≥ Embed qua webhook
function SendMessageEMBED(url, embed)
    local http = game:GetService("HttpService")
    local headers = {
        ["Content-Type"] = "application/json"
    }
    local data = {
        ["embeds"] = {
            {
                ["title"] = embed.title,
                ["description"] = embed.description,
                ["color"] = embed.color,
                ["fields"] = embed.fields,
                ["footer"] = {
                    ["text"] = embed.footer.text
                },
                ["image"] = {
                    ["url"] = embed.imageUrl
                }
            }
        }
    }
    local body = http:JSONEncode(data)
    local response = request({
        Url = url,
        Method = "POST",
        Headers = headers,
        Body = body
    })
    print("Sent")
end

-- H√†m ƒë·ªÉ ki·ªÉm tra ƒëi·ªÅu ki·ªán v√† g·ª≠i tin nh·∫Øn qua webhook
function CheckAndSendWebhook()
    local luckyArrowCount = 0
    local moneyStatus = money and money.Value == 1000000 and "ƒê·∫ßy ti·ªÅn r·ªìi" or "Ch∆∞a ƒë·∫ßy"
    local backpack = LocalPlayer:FindFirstChild("Backpack")
    if backpack then
        -- Duy·ªát qua t·∫•t c·∫£ c√°c ƒë·ªëi t∆∞·ª£ng trong Backpack
        for _, item in pairs(backpack:GetChildren()) do
            if item.Name == "Lucky Arrow" then
                luckyArrowCount = luckyArrowCount + 1  -- ƒê·∫øm s·ªë Lucky Arrow
            end
        end
    end

    -- Ch·ªçn ng·∫´u nhi√™n m·ªôt URL h√¨nh ·∫£nh t·ª´ danh s√°ch
    local randomImageUrl = imageUrls[math.random(1, #imageUrls)]
    
    -- Ki·ªÉm tra s·ªë Lucky Arrow
    local fullLuckyArrow = luckyArrowCount >= 9

    -- T√≠nh to√°n s·ªë ti·ªÅn ƒë√£ ki·∫øm ƒë∆∞·ª£c
local moneyEarned = money.Value - initialMoney  -- S·ªë ti·ªÅn ki·∫øm ƒë∆∞·ª£c sau khi ƒë√£ tr·ª´ ti·ªÅn ban ƒë·∫ßu


    if money and luckyArrowCount >= 9 and money.Value == 1000000 then
        -- N·∫øu ƒë·∫ßy ƒë·ªß ti·ªÅn v√† Lucky Arrows
        SendMessage(url, userId)
        local embed = {
            ["title"] = "YBA AUTO FARM SCRIPT",
            ["description"] = "B·∫£ng Th·ªëng K√™ S·ªë Li·ªáu:",
            ["color"] = 16776960, -- M√†u v√†ng cho th√¥ng b√°o ƒë·∫∑c bi·ªát
            ["fields"] = {
                {
                    ["name"] = "Lucky Arrows & Money:",
                    ["value"] = "ü§ëFULL MONEY & LUCKY ARROWü§ë"
                },
                {
                    ["name"] = "Money Earned:",
                    ["value"] = "S·ªë ti·ªÅn ƒë√£ ki·∫øm ƒë∆∞·ª£c: " .. moneyEarned
                }
            },
            ["footer"] = {
                ["text"] = "Subin | " .. os.date('%Y-%m-%d %H:%M:%S', OSTime)
            },
            ["imageUrl"] = randomImageUrl
        }
        SendMessageEMBED(url, embed)
        SendMessage(url, userId)
    else
        -- N·∫øu ch∆∞a ƒë·ªß ƒëi·ªÅu ki·ªán
        local embed = {
            ["title"] = "YBA AUTO FARM SCRIPT",
            ["description"] = "B·∫£ng Th·ªëng K√™ S·ªë Li·ªáu:",
            ["color"] = 65280,
            ["fields"] = {
                {
                    ["name"] = "Lucky Arrows & Money:",
                    ["value"] = "Lucky Arrows : " .. luckyArrowCount .. "\nMoney : " .. money.Value .. "\nS·ªë ti·ªÅn trong server nh·∫∑t ƒë∆∞·ª£c : " .. moneyEarned
                }
            },
            ["footer"] = {
                ["text"] = "Subin | " .. os.date('%Y-%m-%d %H:%M:%S', OSTime)
            },
            ["imageUrl"] = randomImageUrl
        }
        SendMessageEMBED(url, embed)
    end
end



-- C√†i ƒë·∫∑t c√°c ƒë·ªëi t∆∞·ª£ng c·∫ßn thi·∫øt
local workspace = game:GetService("Workspace")
local players = game:GetService("Players")

local ignoreItems = {
    "Blue Candy",
    "Red Candy",
    "Yellow Candy",
    "Green Candy"
}

-- H√†m ki·ªÉm tra v√† ƒë·∫øm s·ªë l∆∞·ª£ng v·∫≠t ph·∫©m h·ª£p l·ªá
local function countValidItems()
    local validCount = 0
    
    -- Duy·ªát qua t·∫•t c·∫£ c√°c v·∫≠t ph·∫©m trong Items
    for _, item in pairs(workspace.Item_Spawns.Items:GetChildren()) do
        -- Ki·ªÉm tra n·∫øu item c√≥ ProximityPrompt
        local proximityPrompt = item:FindFirstChild("ProximityPrompt")
        if proximityPrompt then
            -- Ki·ªÉm tra ObjectText c·ªßa ProximityPrompt
            local objectText = proximityPrompt.ObjectText
            if objectText and not table.find(ignoreItems, objectText) then
                validCount = validCount + 1
            end
        end
    end
    
    return validCount
end

-- H√†m teleport sang server kh√°c
local function teleportToAnotherServer()
    game:GetService("TeleportService"):Teleport(1601192056)
end

-- H√†m ki·ªÉm tra v√† teleport n·∫øu c·∫ßn
local function checkAndTeleport()
    local previousValidCount = countValidItems()
    local waitTime = 4  -- Th·ªùi gian ch·ªù 5 gi√¢y

    -- Ki·ªÉm tra m·ªói gi√¢y trong v√≤ng 5 gi√¢y
    for i = 1, waitTime do
        wait(1)  -- ƒê·ª£i 1 gi√¢y
        local currentValidCount = countValidItems()
        
        -- N·∫øu s·ªë l∆∞·ª£ng v·∫≠t ph·∫©m h·ª£p l·ªá thay ƒë·ªïi trong v√≤ng 5 gi√¢y, kh√¥ng teleport
        if currentValidCount ~= previousValidCount then
            return  -- N·∫øu c√≥ thay ƒë·ªïi, tho√°t h√†m v√† kh√¥ng teleport
        end
    end
    
    -- N·∫øu kh√¥ng c√≥ thay ƒë·ªïi sau 3 gi√¢y, teleport
    CheckAndSendWebhook()
    teleportToAnotherServer()
end

-- V√≤ng l·∫∑p ch√≠nh ƒë·ªÉ ki·ªÉm tra v√† teleport
while true do
    local validItems = countValidItems()
    
    -- N·∫øu s·ªë l∆∞·ª£ng v·∫≠t ph·∫©m h·ª£p l·ªá nh·ªè h∆°n 3 th√¨ ki·ªÉm tra v√† teleport
    if validItems < 3 then
        checkAndTeleport()
    end
    
    -- ƒê·ª£i m·ªôt ch√∫t tr∆∞·ªõc khi ki·ªÉm tra l·∫°i
    wait(5)  -- Ki·ªÉm tra l·∫°i sau 1 gi√¢y
end